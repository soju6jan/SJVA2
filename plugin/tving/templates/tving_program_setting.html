{% extends "base.html" %}
{% block content %}

<ul class="nav nav-pills bg-light shadow text-dark" >
    <li class="nav-item"><a class="nav-link active" href="/tving/program/setting">설정</a></li>
    <li class="nav-item"><a class="nav-link " href="/tving/program/select">선택</a></li>
    <li class="nav-item"><a class="nav-link " href="/tving/program/list">목록</a></li>
  </ul>
<div class="d-inline-block"></div>

<div>
  <form id="setting">
    {{ macros.setting_input_text('program_auto_path', '저장 폴더', value=arg['program_auto_path'], desc='정상적으로 완료된 파일이 이동할 폴더 입니다. ') }}
    {{ macros.setting_checkbox('program_auto_make_folder', '방송명 폴더 생성', value=arg['program_auto_make_folder'], desc='방송 프로그램 이름으로 폴더를 생성하고 다운로드합니다.') }}
    {{ macros.setting_input_int('program_auto_count_ffmpeg', '동시 다운로드 수', value=arg['program_auto_count_ffmpeg'], desc='동시에 다운로드 할 에피소드 갯수입니다.') }}
    {{ macros.setting_button([['setting_save_btn', '저장']]) }}
    </form>
</div> <!--전체-->


<script type="text/javascript">
var package_name = 'tving';
$(document).ready(function(){
});

//설정 저장
$("body").on('click', '#setting_save_btn', function(e){
  e.preventDefault();
  var formData = get_formdata('#setting');
  $.ajax({
    url: '/' + package_name + '/ajax/setting_save',
    type: "POST", 
    cache: false,
    data: formData,
    dataType: "json",
    success: function (ret) {
      if (ret =='0') {
        $.notify('<strong>설정을 저장하였습니다.</strong>', {
          type: 'success'
        });
      } else {
        $.notify('<strong>설정에 실패하였습니다.</strong>', {
          type: 'warning'
        });
      }
    }
  });
});

</script>    
{% endblock %}